import{r,_ as W,a as z,b as Re,c as T,d as ye,R as E,C as Ue,e as ke,f as Q,g as ee,h as Xe,u as Ye,i as te,j as Je,k as Ze,l as Ce,m as Qe,n as et,o as tt,p as nt,q as re,s as ot,t as S,v as at}from"./index-BC8tp-DE.js";import{I as le,K as Z,g as it,m as rt,a as ct,o as st}from"./mobxreact.esm-D73HFc72.js";import{p as lt,u as ut}from"./UnstableContext-C2K1FWNL.js";import{K as dt,u as _e,R as ft}from"./KeyCode-CkMMR2GD.js";var mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},gt=function(t,n){return r.createElement(le,W({},t,{ref:n,icon:mt}))},vt=r.forwardRef(gt),pt={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},ht=function(t,n){return r.createElement(le,W({},t,{ref:n,icon:pt}))},bt=r.forwardRef(ht),yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},Ct=function(t,n){return r.createElement(le,W({},t,{ref:n,icon:yt}))},xt=r.forwardRef(Ct),Nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},St=function(t,n){return r.createElement(le,W({},t,{ref:n,icon:Nt}))},$t=r.forwardRef(St),Me=r.forwardRef(function(e,t){var n=e.prefixCls,o=e.style,i=e.className,l=e.duration,a=l===void 0?4.5:l,c=e.showProgress,d=e.pauseOnHover,f=d===void 0?!0:d,O=e.eventKey,x=e.content,p=e.closable,C=e.closeIcon,I=C===void 0?"x":C,g=e.props,v=e.onClick,R=e.onNoticeClose,$=e.times,w=e.hovering,N=r.useState(!1),P=z(N,2),b=P[0],k=P[1],m=r.useState(0),u=z(m,2),s=u[0],h=u[1],L=r.useState(0),F=z(L,2),M=F[0],U=F[1],j=w||b,H=a>0&&c,G=function(){R(O)},X=function(y){(y.key==="Enter"||y.code==="Enter"||y.keyCode===dt.ENTER)&&G()};r.useEffect(function(){if(!j&&a>0){var B=Date.now()-M,y=setTimeout(function(){G()},a*1e3-M);return function(){f&&clearTimeout(y),U(Date.now()-B)}}},[a,j,$]),r.useEffect(function(){if(!j&&H&&(f||M===0)){var B=performance.now(),y,_=function de(){cancelAnimationFrame(y),y=requestAnimationFrame(function(fe){var K=fe+M-B,q=Math.min(K/(a*1e3),1);h(q*100),q<1&&de()})};return _(),function(){f&&cancelAnimationFrame(y)}}},[a,M,j,H,$]);var oe=r.useMemo(function(){return Re(p)==="object"&&p!==null?p:p?{closeIcon:I}:{}},[p,I]),ue=lt(oe,!0),Y=100-(!s||s<0?0:s>100?100:s),D="".concat(n,"-notice");return r.createElement("div",W({},g,{ref:t,className:T(D,i,ye({},"".concat(D,"-closable"),p)),style:o,onMouseEnter:function(y){var _;k(!0),g==null||(_=g.onMouseEnter)===null||_===void 0||_.call(g,y)},onMouseLeave:function(y){var _;k(!1),g==null||(_=g.onMouseLeave)===null||_===void 0||_.call(g,y)},onClick:v}),r.createElement("div",{className:"".concat(D,"-content")},x),p&&r.createElement("a",W({tabIndex:0,className:"".concat(D,"-close"),onKeyDown:X,"aria-label":"Close"},ue,{onClick:function(y){y.preventDefault(),y.stopPropagation(),G()}}),oe.closeIcon),H&&r.createElement("progress",{className:"".concat(D,"-progress"),max:"100",value:Y},Y+"%"))}),Le=E.createContext({}),Et=function(t){var n=t.children,o=t.classNames;return E.createElement(Le.Provider,{value:{classNames:o}},n)},Ee=8,we=3,Oe=16,wt=function(t){var n={offset:Ee,threshold:we,gap:Oe};if(t&&Re(t)==="object"){var o,i,l;n.offset=(o=t.offset)!==null&&o!==void 0?o:Ee,n.threshold=(i=t.threshold)!==null&&i!==void 0?i:we,n.gap=(l=t.gap)!==null&&l!==void 0?l:Oe}return[!!t,n]},Ot=["className","style","classNames","styles"],It=function(t){var n=t.configList,o=t.placement,i=t.prefixCls,l=t.className,a=t.style,c=t.motion,d=t.onAllNoticeRemoved,f=t.onNoticeClose,O=t.stack,x=r.useContext(Le),p=x.classNames,C=r.useRef({}),I=r.useState(null),g=z(I,2),v=g[0],R=g[1],$=r.useState([]),w=z($,2),N=w[0],P=w[1],b=n.map(function(j){return{config:j,key:String(j.key)}}),k=wt(O),m=z(k,2),u=m[0],s=m[1],h=s.offset,L=s.threshold,F=s.gap,M=u&&(N.length>0||b.length<=L),U=typeof c=="function"?c(o):c;return r.useEffect(function(){u&&N.length>1&&P(function(j){return j.filter(function(H){return b.some(function(G){var X=G.key;return H===X})})})},[N,b,u]),r.useEffect(function(){var j;if(u&&C.current[(j=b[b.length-1])===null||j===void 0?void 0:j.key]){var H;R(C.current[(H=b[b.length-1])===null||H===void 0?void 0:H.key])}},[b,u]),E.createElement(Ue,W({key:o,className:T(i,"".concat(i,"-").concat(o),p?.list,l,ye(ye({},"".concat(i,"-stack"),!!u),"".concat(i,"-stack-expanded"),M)),style:a,keys:b,motionAppear:!0},U,{onAllRemoved:function(){d(o)}}),function(j,H){var G=j.config,X=j.className,oe=j.style,ue=j.index,Y=G,D=Y.key,B=Y.times,y=String(D),_=G,de=_.className,fe=_.style,K=_.classNames,q=_.styles,We=ke(_,Ot),me=b.findIndex(function(ie){return ie.key===y}),ae={};if(u){var J=b.length-1-(me>-1?me:ue-1),Se=o==="top"||o==="bottom"?"-50%":"0";if(J>0){var ge,ve,pe;ae.height=M?(ge=C.current[y])===null||ge===void 0?void 0:ge.offsetHeight:v?.offsetHeight;for(var $e=0,he=0;he<J;he++){var be;$e+=((be=C.current[b[b.length-1-he].key])===null||be===void 0?void 0:be.offsetHeight)+F}var qe=(M?$e:J*h)*(o.startsWith("top")?1:-1),Ve=!M&&v!==null&&v!==void 0&&v.offsetWidth&&(ve=C.current[y])!==null&&ve!==void 0&&ve.offsetWidth?(v?.offsetWidth-h*2*(J<3?J:3))/((pe=C.current[y])===null||pe===void 0?void 0:pe.offsetWidth):1;ae.transform="translate3d(".concat(Se,", ").concat(qe,"px, 0) scaleX(").concat(Ve,")")}else ae.transform="translate3d(".concat(Se,", 0, 0)")}return E.createElement("div",{ref:H,className:T("".concat(i,"-notice-wrapper"),X,K?.wrapper),style:Q(Q(Q({},oe),ae),q?.wrapper),onMouseEnter:function(){return P(function(V){return V.includes(y)?V:[].concat(ee(V),[y])})},onMouseLeave:function(){return P(function(V){return V.filter(function(Ke){return Ke!==y})})}},E.createElement(Me,W({},We,{ref:function(V){me>-1?C.current[y]=V:delete C.current[y]},prefixCls:i,classNames:K,styles:q,className:T(de,p?.notice),style:fe,times:B,key:D,eventKey:D,onNoticeClose:f,hovering:u&&N.length>0})))})},Pt=r.forwardRef(function(e,t){var n=e.prefixCls,o=n===void 0?"rc-notification":n,i=e.container,l=e.motion,a=e.maxCount,c=e.className,d=e.style,f=e.onAllRemoved,O=e.stack,x=e.renderNotifications,p=r.useState([]),C=z(p,2),I=C[0],g=C[1],v=function(u){var s,h=I.find(function(L){return L.key===u});h==null||(s=h.onClose)===null||s===void 0||s.call(h),g(function(L){return L.filter(function(F){return F.key!==u})})};r.useImperativeHandle(t,function(){return{open:function(u){g(function(s){var h=ee(s),L=h.findIndex(function(U){return U.key===u.key}),F=Q({},u);if(L>=0){var M;F.times=(((M=s[L])===null||M===void 0?void 0:M.times)||0)+1,h[L]=F}else F.times=0,h.push(F);return a>0&&h.length>a&&(h=h.slice(-a)),h})},close:function(u){v(u)},destroy:function(){g([])}}});var R=r.useState({}),$=z(R,2),w=$[0],N=$[1];r.useEffect(function(){var m={};I.forEach(function(u){var s=u.placement,h=s===void 0?"topRight":s;h&&(m[h]=m[h]||[],m[h].push(u))}),Object.keys(w).forEach(function(u){m[u]=m[u]||[]}),N(m)},[I]);var P=function(u){N(function(s){var h=Q({},s),L=h[u]||[];return L.length||delete h[u],h})},b=r.useRef(!1);if(r.useEffect(function(){Object.keys(w).length>0?b.current=!0:b.current&&(f?.(),b.current=!1)},[w]),!i)return null;var k=Object.keys(w);return Xe.createPortal(r.createElement(r.Fragment,null,k.map(function(m){var u=w[m],s=r.createElement(It,{key:m,configList:u,placement:m,prefixCls:o,className:c?.(m),style:d?.(m),motion:l,onNoticeClose:v,onAllNoticeRemoved:P,stack:O});return x?x(s,{prefixCls:o,key:m}):s})),i)}),jt=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Rt=function(){return document.body},Ie=0;function kt(){for(var e={},t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach(function(i){i&&Object.keys(i).forEach(function(l){var a=i[l];a!==void 0&&(e[l]=a)})}),e}function _t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,n=t===void 0?Rt:t,o=e.motion,i=e.prefixCls,l=e.maxCount,a=e.className,c=e.style,d=e.onAllRemoved,f=e.stack,O=e.renderNotifications,x=ke(e,jt),p=r.useState(),C=z(p,2),I=C[0],g=C[1],v=r.useRef(),R=r.createElement(Pt,{container:I,ref:v,prefixCls:i,motion:o,maxCount:l,className:a,style:c,onAllRemoved:d,stack:f,renderNotifications:O}),$=r.useState([]),w=z($,2),N=w[0],P=w[1],b=Ye(function(m){var u=kt(x,m);(u.key===null||u.key===void 0)&&(u.key="rc-notification-".concat(Ie),Ie+=1),P(function(s){return[].concat(ee(s),[{type:"open",config:u}])})}),k=r.useMemo(function(){return{open:b,close:function(u){P(function(s){return[].concat(ee(s),[{type:"close",key:u}])})},destroy:function(){P(function(u){return[].concat(ee(u),[{type:"destroy"}])})}}},[]);return r.useEffect(function(){g(n())}),r.useEffect(function(){if(v.current&&N.length){N.forEach(function(s){switch(s.type){case"open":v.current.open(s.config);break;case"close":v.current.close(s.key);break;case"destroy":v.current.destroy();break}});var m,u;P(function(s){return(m!==s||!u)&&(m=s,u=s.filter(function(h){return!N.includes(h)})),u})}},[N]),[k,R]}const Mt=100,Lt=10,Ft=Mt*Lt,Ht=e=>{const{componentCls:t,notificationMarginEdge:n,animationMaxHeight:o}=e,i=`${t}-notice`,l=new Z("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),a=new Z("antNotificationTopFadeIn",{"0%":{top:-o,opacity:0},"100%":{top:0,opacity:1}}),c=new Z("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(o).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),d=new Z("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[i]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:a}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:c}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:l}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:n,_skip_check_:!0},[i]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:d}}}}},At=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Tt={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Bt=(e,t)=>{const{componentCls:n}=e;return{[`${n}-${t}`]:{[`&${n}-stack > ${n}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[Tt[t]]:{value:0,_skip_check_:!0}}}}},zt=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},Dt=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},Gt=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`transform ${e.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},zt(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},Dt(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},At.map(n=>Bt(e,n)).reduce((n,o)=>Object.assign(Object.assign({},n),o),{}))},Fe=e=>{const{iconCls:t,componentCls:n,boxShadow:o,fontSizeLG:i,notificationMarginBottom:l,borderRadiusLG:a,colorSuccess:c,colorInfo:d,colorWarning:f,colorError:O,colorTextHeading:x,notificationBg:p,notificationPadding:C,notificationMarginEdge:I,notificationProgressBg:g,notificationProgressHeight:v,fontSize:R,lineHeight:$,width:w,notificationIconSize:N,colorText:P,colorSuccessBg:b,colorErrorBg:k,colorInfoBg:m,colorWarningBg:u}=e,s=`${n}-notice`;return{position:"relative",marginBottom:l,marginInlineStart:"auto",background:p,borderRadius:a,boxShadow:o,[s]:{padding:C,width:w,maxWidth:`calc(100vw - ${te(e.calc(I).mul(2).equal())})`,lineHeight:$,wordWrap:"break-word",borderRadius:a,overflow:"hidden","&-success":{background:b},"&-error":{background:k},"&-info":{background:m},"&-warning":{background:u}},[`${s}-message`]:{color:x,fontSize:i,lineHeight:e.lineHeightLG},[`${s}-description`]:{fontSize:R,color:P,marginTop:e.marginXS},[`${s}-closable ${s}-message`]:{paddingInlineEnd:e.paddingLG},[`${s}-with-icon ${s}-message`]:{marginInlineStart:e.calc(e.marginSM).add(N).equal(),fontSize:i},[`${s}-with-icon ${s}-description`]:{marginInlineStart:e.calc(e.marginSM).add(N).equal(),fontSize:R},[`${s}-icon`]:{position:"absolute",fontSize:N,lineHeight:1,[`&-success${t}`]:{color:c},[`&-info${t}`]:{color:d},[`&-warning${t}`]:{color:f},[`&-error${t}`]:{color:O}},[`${s}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center",background:"none",border:"none","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},Ze(e)),[`${s}-progress`]:{position:"absolute",display:"block",appearance:"none",inlineSize:`calc(100% - ${te(a)} * 2)`,left:{_skip_check_:!0,value:a},right:{_skip_check_:!0,value:a},bottom:0,blockSize:v,border:0,"&, &::-webkit-progress-bar":{borderRadius:a,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:g},"&::-webkit-progress-value":{borderRadius:a,background:g}},[`${s}-actions`]:{float:"right",marginTop:e.marginSM}}},Wt=e=>{const{componentCls:t,notificationMarginBottom:n,notificationMarginEdge:o,motionDurationMid:i,motionEaseInOut:l}=e,a=`${t}-notice`,c=new Z("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:n},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},Je(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:o,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:l,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:l,animationFillMode:"both",animationDuration:i,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:c,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${a}-actions`]:{float:"left"}}})},{[t]:{[`${a}-wrapper`]:Fe(e)}}]},He=e=>({zIndexPopup:e.zIndexPopupBase+Ft+50,width:384,colorSuccessBg:e.colorSuccessBg,colorErrorBg:e.colorErrorBg,colorInfoBg:e.colorInfoBg,colorWarningBg:e.colorWarningBg}),Ae=e=>{const t=e.paddingMD,n=e.paddingLG;return rt(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:n,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${te(e.paddingMD)} ${te(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},Te=it("Notification",e=>{const t=Ae(e);return[Wt(t),Ht(t),Gt(t)]},He),qt=ct(["Notification","PurePanel"],e=>{const t=`${e.componentCls}-notice`,n=Ae(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},Fe(n)),{width:n.width,maxWidth:`calc(100vw - ${te(e.calc(n.notificationMarginEdge).mul(2).equal())})`,margin:0})}},He);var Vt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function xe(e,t){return t===null||t===!1?null:t||r.createElement(ft,{className:`${e}-close-icon`})}const Kt={success:vt,info:$t,error:bt,warning:xt},Be=e=>{const{prefixCls:t,icon:n,type:o,message:i,description:l,actions:a,role:c="alert"}=e;let d=null;return n?d=r.createElement("span",{className:`${t}-icon`},n):o&&(d=r.createElement(Kt[o]||null,{className:T(`${t}-icon`,`${t}-icon-${o}`)})),r.createElement("div",{className:T({[`${t}-with-icon`]:d}),role:c},d,r.createElement("div",{className:`${t}-message`},i),l&&r.createElement("div",{className:`${t}-description`},l),a&&r.createElement("div",{className:`${t}-actions`},a))},Ut=e=>{const{prefixCls:t,className:n,icon:o,type:i,message:l,description:a,btn:c,actions:d,closable:f=!0,closeIcon:O,className:x}=e,p=Vt(e,["prefixCls","className","icon","type","message","description","btn","actions","closable","closeIcon","className"]),{getPrefixCls:C}=r.useContext(Ce),I=d??c,g=t||C("notification"),v=`${g}-notice`,R=_e(g),[$,w,N]=Te(g,R);return $(r.createElement("div",{className:T(`${v}-pure-panel`,w,n,N,R)},r.createElement(qt,{prefixCls:g}),r.createElement(Me,Object.assign({},p,{prefixCls:g,eventKey:"pure",duration:null,closable:f,className:T({notificationClassName:x}),closeIcon:xe(g,O),content:r.createElement(Be,{prefixCls:v,icon:o,type:i,message:l,description:a,actions:I})}))))};function Xt(e,t,n){let o;switch(e){case"top":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":o={left:0,top:t,bottom:"auto"};break;case"topRight":o={right:0,top:t,bottom:"auto"};break;case"bottom":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:n};break;case"bottomLeft":o={left:0,top:"auto",bottom:n};break;default:o={right:0,top:"auto",bottom:n};break}return o}function Yt(e){return{motionName:`${e}-fade`}}function Jt(e,t,n){return typeof e<"u"?e:typeof t?.closeIcon<"u"?t.closeIcon:n?.closeIcon}var Zt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Pe=24,Qt=4.5,en="topRight",tn=({children:e,prefixCls:t})=>{const n=_e(t),[o,i,l]=Te(t,n);return o(E.createElement(Et,{classNames:{list:T(i,l,n)}},e))},nn=(e,{prefixCls:t,key:n})=>E.createElement(tn,{prefixCls:t,key:n},e),on=E.forwardRef((e,t)=>{const{top:n,bottom:o,prefixCls:i,getContainer:l,maxCount:a,rtl:c,onAllRemoved:d,stack:f,duration:O,pauseOnHover:x=!0,showProgress:p}=e,{getPrefixCls:C,getPopupContainer:I,notification:g,direction:v}=r.useContext(Ce),[,R]=Qe(),$=i||C("notification"),w=m=>Xt(m,n??Pe,o??Pe),N=()=>T({[`${$}-rtl`]:c??v==="rtl"}),P=()=>Yt($),[b,k]=_t({prefixCls:$,style:w,className:N,motion:P,closable:!0,closeIcon:xe($),duration:O??Qt,getContainer:()=>l?.()||I?.()||document.body,maxCount:a,pauseOnHover:x,showProgress:p,onAllRemoved:d,renderNotifications:nn,stack:f===!1?!1:{threshold:typeof f=="object"?f?.threshold:void 0,offset:8,gap:R.margin}});return E.useImperativeHandle(t,()=>Object.assign(Object.assign({},b),{prefixCls:$,notification:g})),k});function ze(e){const t=E.useRef(null);return[E.useMemo(()=>{const o=c=>{var d;if(!t.current)return;const{open:f,prefixCls:O,notification:x}=t.current,p=`${O}-notice`,{message:C,description:I,icon:g,type:v,btn:R,actions:$,className:w,style:N,role:P="alert",closeIcon:b,closable:k}=c,m=Zt(c,["message","description","icon","type","btn","actions","className","style","role","closeIcon","closable"]),u=$??R,s=xe(p,Jt(b,e,x));return f(Object.assign(Object.assign({placement:(d=e?.placement)!==null&&d!==void 0?d:en},m),{content:E.createElement(Be,{prefixCls:p,icon:g,type:v,message:C,description:I,actions:u,role:P}),className:T(v&&`${p}-${v}`,w,x?.className),style:Object.assign(Object.assign({},x?.style),N),closeIcon:s,closable:k??!!s}))},l={open:o,destroy:c=>{var d,f;c!==void 0?(d=t.current)===null||d===void 0||d.close(c):(f=t.current)===null||f===void 0||f.destroy()}};return["success","info","warning","error"].forEach(c=>{l[c]=d=>o(Object.assign(Object.assign({},d),{type:c}))}),l},[]),E.createElement(on,Object.assign({key:"notification-holder"},e,{ref:t}))]}function an(e){return ze(e)}const rn=E.createContext({});let A=null,ce=e=>e(),se=[],ne={};function je(){const{getContainer:e,rtl:t,maxCount:n,top:o,bottom:i,showProgress:l,pauseOnHover:a}=ne,c=e?.()||document.body;return{getContainer:()=>c,rtl:t,maxCount:n,top:o,bottom:i,showProgress:l,pauseOnHover:a}}const cn=E.forwardRef((e,t)=>{const{notificationConfig:n,sync:o}=e,{getPrefixCls:i}=r.useContext(Ce),l=ne.prefixCls||i("notification"),a=r.useContext(rn),[c,d]=ze(Object.assign(Object.assign(Object.assign({},n),{prefixCls:l}),a.notification));return E.useEffect(o,[]),E.useImperativeHandle(t,()=>{const f=Object.assign({},c);return Object.keys(f).forEach(O=>{f[O]=(...x)=>(o(),c[O].apply(c,x))}),{instance:f,sync:o}}),d}),sn=E.forwardRef((e,t)=>{const[n,o]=E.useState(je),i=()=>{o(je)};E.useEffect(i,[]);const l=tt(),a=l.getRootPrefixCls(),c=l.getIconPrefixCls(),d=l.getTheme(),f=E.createElement(cn,{ref:t,sync:i,notificationConfig:n});return E.createElement(et,{prefixCls:a,iconPrefixCls:c,theme:d},l.holderRender?l.holderRender(f):f)}),Ne=()=>{if(!A){const e=document.createDocumentFragment(),t={fragment:e};A=t,ce(()=>{ut()(E.createElement(sn,{ref:o=>{const{instance:i,sync:l}=o||{};Promise.resolve().then(()=>{!t.instance&&i&&(t.instance=i,t.sync=l,Ne())})}}),e)});return}A.instance&&(se.forEach(e=>{switch(e.type){case"open":{ce(()=>{A.instance.open(Object.assign(Object.assign({},ne),e.config))});break}case"destroy":ce(()=>{var t;(t=A?.instance)===null||t===void 0||t.destroy(e.key)});break}}),se=[])};function ln(e){ne=Object.assign(Object.assign({},ne),e),ce(()=>{var t;(t=A?.sync)===null||t===void 0||t.call(A)})}function De(e){se.push({type:"open",config:e}),Ne()}const un=e=>{se.push({type:"destroy",key:e}),Ne()},dn=["success","info","warning","error"],fn={open:De,destroy:un,config:ln,useNotification:an,_InternalPanelDoNotUseOrYouWillBeFired:Ut},Ge=fn;dn.forEach(e=>{Ge[e]=t=>De(Object.assign(Object.assign({},t),{type:e}))});function mn(e){const t=document.createElement("iframe");document.body.append(t),t.contentDocument.write(`
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
    </head>
    <body>
      ${e.details.map(n=>`${n.food.name} - ${n.amount} - ${n.food.price} `)}
    </body>
    </html>
  `),t.contentWindow.print()}class gn{orders=[];constructor(){at(this)}deleteOrder(t){this.orders.splice(t,1)}changeOrderStatus(t,n){this.orders[t].status=n}addOrders(...t){this.orders.push(...t)}}const Cn=st(vn);function vn(){const[e,t]=Ge.useNotification(),[n]=r.useState(()=>nt(new gn));r.useEffect(()=>{let a=!1;return re.get("/api/restaurant/1/order").then(c=>{a==!1&&n.addOrders(...c.data)}),()=>{a=!0}},[n]),r.useEffect(()=>{const a=ot(`ws://${location.host}`,{path:"/restaurant",transports:["websocket","polling"],query:{restaurant:"restaurant:1"}});return a.on("new order",c=>{console.log("有新的订单",c),n.orders.unshift(c),e.info({message:"有新的订单",description:"请及时查看！",placement:"top",duration:null})}),()=>{a.close()}},[]);async function o(a){const c=n.orders[a];await re.put(`/api/restaurant/:rid/order/${c.id}/status`,{status:"confirmed"}),n.changeOrderStatus(a,"confirmed")}async function i(a){const c=n.orders[a];await re.put(`/api/restaurant/:rid/order/${c.id}/status`,{status:"completed"}),n.changeOrderStatus(a,"completed")}async function l(a,c){await re.delete(`/api/restaurant/1/order/${a}`),n.deleteOrder(c)}return S.jsxs("div",{children:[t,S.jsxs("div",{children:[S.jsx("span",{className:"font-bold text-2xl",children:"订单管理"}),S.jsx("ul",{children:n.orders.map((a,c)=>S.jsxs("li",{className:"border flex rounded p-2 m-2",children:[S.jsxs("div",{className:"flex flex-col text-base gap-2 p-2",children:[S.jsxs("div",{children:["桌号：",a.deskName]}),S.jsxs("div",{children:["人数：",a.customCount]}),S.jsxs("div",{children:["状态：",a.status=="pending"?"待确认":a.status=="confirmed"?"已确认":"已完成"]}),S.jsxs("div",{children:["时间：",new Date(a.timestamp).toLocaleString()]}),S.jsxs("div",{children:[S.jsx("button",{onClick:()=>mn(a),children:"打印"}),a.status=="pending"&&S.jsx("button",{onClick:()=>o(c),children:"确认"}),a.status=="confirmed"&&S.jsx("button",{onClick:()=>i(c),children:"完成"}),S.jsx("button",{onClick:()=>l(a.id,c),children:"删除"})]})]}),S.jsxs("div",{className:"border grow p-2 rounded text-base",children:[S.jsxs("div",{className:"flex justify-around font-bold border-b p-1",children:[S.jsx("span",{className:"w-1/3 text-right",children:"菜名"}),S.jsx("span",{className:"w-1/3 text-right",children:"数量"}),S.jsx("span",{className:"w-1/3 text-right",children:"价格"})]}),a.details.map((d,f)=>S.jsxs("div",{className:"flex grow p-1",children:[S.jsx("span",{className:"w-1/3 text-right",children:d.food.name}),S.jsx("span",{className:"w-1/3 text-right",children:d.amount}),S.jsx("span",{className:"w-1/3 text-right",children:d.food.price*d.amount})]},f))]})]},a.id))})]})]})}export{Cn as default};
